<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta charset="UTF-8">
<link rel="icon" type="image/png" href="https://corru.observer/img/fav.gif">







<title>..__dungeontest__..</title>	
<meta name="title" content="..__dungeontest__..">
<meta name="description" content="ANALYSIS::'internal thoughtspace'">

<meta property="og:type" content="website">
<meta property="og:url" content="https://mistsofnowh3r3.github.io/run">
<meta property="og:title" content="..__dungeontest__..">
<meta property="og:description" content="ANALYSIS::'internal thoughtspace'">
<meta property="og:image" content="https://corru.observer/img/socials/global.gif">

<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://corru.observer/concepts/prog/">
<meta property="twitter:title" content="..__dungeontest__..">
<meta property="twitter:description" content="ANALYSIS::'internal thoughtspace'">
<meta property="twitter:image" content="https://corru.observer/img/socials/global.gif">
<meta name="theme-color" content="#ff00ff">
<meta name="darkreader-lock">
	
	<script src="https://corru.observer/js/lib/swup.min.js"></script>
	<script src="https://corru.observer/js/lib/howler.min.js"></script>
	<script src="https://corru.observer/js/lib/lettering.js"></script>	
	<script src="https://corru.observer/js/lib/lzstring.js"></script>	
	<script src="https://corru.observer/js/lib/gpu/detect-gpu.umd.js"></script>	
	<script src="https://corru.observer/js/lib/draggable.bundle.js"></script>	
	<script src="https://corru.observer/js/corru.js?1739304139471944793"></script>	
	<script src="https://corru.observer/js/dialogue.js?1739304139471944793"></script>	
	<script src="https://corru.observer/js/globalents.js?1739304139471944793"></script>	
	<script src="https://corru.observer/js/cystStage.js?1739304139471944793"></script>
	<script src="https://corru.observer/js/buddy.js?1739304139471944793"></script>
	<script src="https://corru.observer/js/vn2.js?1739304139471944793"></script>
	<script defer src="https://corru.observer/js/saves.js?1739304139471944793"></script>
	<link rel="stylesheet" type="text/css" href='https://corru.observer/css/corru.css?1739304139471944793'>
	<link rel="stylesheet" type="text/css" href='https://corru.observer/css/cystStage.css?1739304139471944793'>
</head>
<body state="corru-unloaded" menu="none" class="loading">
	<div id='meta-menu'>
		<!--core icon-->
		<div id='meta-icon'></div>

		<!--moth icon-->
		<i class='ci-moth moth-trigger' 
			onclick="if(!body.classList.contains('in-menu')) startDialogue('++moth')"
			definition="NOTE::'establishes external contact'"
		><span class="mothnotice"><i class='ci-moth'></i></span></i>

		<!--volume controls icon-->
		<i id='meta-volume-toggle' class='ci-vol'></i>
		<div id='meta-volume'><input type='range' min='0' max='1' value='0.5' step='0.05' class='slider' id='meta-volume-slider'></div>

		<!--dropdown menu-->
		<i class='ci-bars'></i>
		<div id='meta-links'>
			<div id="mui-links">
				<a id='meta-sys' definition="NOTE::'system management'"><i class='ci-sys'></i></a>
			</div>
		</div>
	</div>

	<div id="advance-notice">
		<div class="target always-targeted" entity="advance log"></div>
	</div>
	
	<div id="mindspike-scanner">
		<div id="mindspike-entities"></div>
		<div id="mindspike-actions">
			<form id="act">
				<input type="text" id="act-input" placeholder="CONCEPT">
				<input type="submit" id="act-submit" value="ENACT">
			</form>
			<div id="act-options">
				<div class="act-option">connect</div>
				<div class="act-option">back away</div>
			</div>
		</div>
		<div id="mindspike-options">
			<span id="mindspike-examine">EXM</span>
			<span id="mindspike-act">ACT</span>
			<span id="mindspike-back"><--</span>
		</div>
	</div>

	<div id="static">
		<div class="enter" onclick="page.onEnter()" page="..__dungeontest__..">
			[[__PROCEED__]]
		</div>
	</div>

	<div id="readout" class="readout-log menu"></div>
	<div id="minireadout" class="readout-log menu"></div> 
	<div id="definition-box"></div>
	<div id="dialogue-box" class="menu-box menu" menu="dialogue"></div>

	<div id="entity-menu" class="menu-box menu" menu="entities">
		<div class="menureturn button" onclick="exitMenu()">RETURN</div>
		<div class="pagelist"></div>
	</div>

	<div id="entity-details" class="menu-box menu" menu="entities">
		<div id="entbox">
			<div id="entcontent" class="readout-log"></div>
		</div>
	</div>
	
	<div id="system-menu" class="menu-box menu" menu="system">
	<div class="menureturn button" onclick="exitMenu()">RETURN</div>
	<div class="mindsci-status"></div>
	
    <details class="sysblock">			
		<summary>Mindspike Data Management</summary>

		<div class="buttons">
            <span class="button import primary">
                <input type="file" id="fileInput" onchange="uploadSave(event)">
                Import File
            </span>
			<span id="export" class="button export primary">Export File</span>
			<span id="select" class="button" definition="ATTENTION::'irreversible action';'select log EP'" onclick="startDialogue('++epselect')">Select</span>
			<span id="delete" class="button" definition="ATTENTION::'irreversible action';'not advised';'may cause mental distress'">Delete</span>
		</div>
        
        <details class="minor">
            <summary>Advanced Operations</summary>
            <details class="minor loadstring">
                <summary definition="NOTICE::'legacy import';'recommend using file management above'">Load Neural String</summary>
                <div class="stringinput">
                    <input id="savetext" type="textarea" placeholder="NOTE::'paste data';'exercise caution'">
                    <span id="import" class="button">Import String</span>
                </div>
            </details>
            
            <details class="minor modstring">
                <summary definition="NOTICE::'third-party resources loaded by system';'allows for log modifications'">Modification URL List</summary>
                <div class="stringinput">
                    <p class="sysinfo">Data URLs should be separated by new lines. Hitting save will manually load and initialize all third party modifications listed. They will be initialized automatically from then on, in order, until removed.</p>
                    <textarea id="modtext" placeholder="https://..."></textarea>
                    <span id="savemods" class="button">Save List</span>
                </div>
            </details>
        </details>

		<div class="warning sysbox">
			<h3>!!__Attention__!!</h3>
			<span>Only import mindspike data and modifications from trusted sources. Illicit data is known to carry dangerous and often lethal thoughtforms. Failure to exercise caution could lead to stroke, chronos misalignment, or worse. By importing any data into your mindspike, you waive all right to medical claims against MINDSCI. For more information, please refer to your license agreement.</span>
		</div>
	</details>

	<details class="sysblock center" id="quality-select">
        <summary>Visual Preferences</summary>
        <div class="systoggles">
            <div class="sysbox">
                <h3>General Quality</h3>
                <p class="sysinfo">Lower overall quality of rendering, primarily in spatial environments. Favorable for low performance hardware.</p>
                <div class="buttons">
                    <span onclick="javascript:setQualityPreference(this.getAttribute('quality'))" quality="low" class="button">Low</span>
                    <span onclick="javascript:setQualityPreference(this.getAttribute('quality'))" quality="regular" class="button">Regular</span>
                </div>
            </div>

            <div class="sysbox">
                <h3>Interface Size</h3>
                <p class="sysinfo">Altering your interface size preference will change the scale of all text, and scale all menus accordingly.</p>

                <div class="buttons">
                    <span onclick="javascript:setSizePreference('large')" class="button large-size">Large</span>
                    <span onclick="javascript:setSizePreference('normal')" class="button normal-size">Normal</span>
                </div>
            </div>

            <div class="sysbox widescreen">
                <h3>Widescreen Adapter</h3>
                <p class="sysinfo">For larger than standard rendering output, use of an adapter is recommended. <span class="obesk-color">Changing this setting will reinitialize - you will lose your current position, but not your progress.</span></p>
                <div class="buttons">
                    <span onclick="javascript:change('widegamer', 'adapter'); nonStandardScreenCheck()" wide="on" class="button">On</span>
                    <span onclick="javascript:window.parent.postMessage('wideoff', '*')" wide="off" class="button">Off</span>
                </div>
            </div>
        </div>
	</details>

	<details class="sysblock center" id="control-select">
		<summary>Control Preferences</summary>
        <div class="sysbox">
            <h3>Intensity</h3>
            <p class="sysinfo">Activate REDUCED INTENSITY to present alternative options to scenarios involving realtime controls.</p>

            <div class="buttons">
                <span onclick="javascript:setIntensityPreference(true)" class="button low-intensity">Reduced Intensity</span>
                <span onclick="javascript:setIntensityPreference(false)" class="button reg-intensity">Regular Intensity</span>
            </div>
        </div>

        <div class="sysbox">
            <h3>Gameplay</h3>
            <p class="sysinfo">Logs of games or game-like experiences may contain inherited context of their rules, allowing for re-interpretive rendering through user input.</p>
            <p class="sysinfo">This feature is intended for entertainment only, and may result in memory drift if misused. It may be disabled to ensure memories of games do not depart from their true events.</p>
            
            <div class="buttons">
                <span onclick="javascript:setGameplayPreference(false)" class="button gameplay-off">Disable Gameplay</span>
                <span onclick="javascript:setGameplayPreference(true)" class="button gameplay-on">Enable Gameplay</span>
            </div>
        </div>
	</details>

	<details class="sysblock meta" open>
		<summary>System Information</summary>

        <div class="sysbox specs ulbox">
            <h4>Mindspike Specifications</h4>
            <ul>
                <li><span>System Type:</span> Release Candidate</li>
                <li><span>Version:</span> Tonga 1.1 <em class="definition" definition="NOTICE::'violation of terms of service';'modification of critical resources';'legally required authorization rejected for more than 730 consecutive days'">(SERVICE TERMINATED)</em></li>
                <li><span>Device ID:</span> IUF8-2H8FG7-1K1KS-58G-HT5</li>
                <li><span>Installation Agent:</span> Luis Forti</li>
                <li><span>Installed on:</span> January 2nd, 2050</li>
            </ul>
        </div>

        <div class="sysbox credits">
            <div class="devs ulbox">
                <ul>
                    <h4>Original Support Team</h4>
                    <li><a href="https://corru.works" target="_blank">Mindsci</a></li>
                    <li><a href="https://neocities.org/site/corru" target="_blank">Neurosight</a></li>
                    <li><a href="https://pocl.vip/" target="_blank">POCL Cortical Labs</a></li>
                    <li><a href="https://www.jacktenbusch.com/" target="_blank">JakkRabbit, LLC</a></li>
                    <li><span definition="mystery shader man has no website sorry but his name is Kazne">Ink Noetics, INC.</span></li>
                    <li><a href="https://uh.fyi/" target="_blank">OMNITRIBE</a></li>
                    <li><a href="https://uh.fyi/redrealm" target="_blank">Redrealms Nootropics</a></li>
                </ul>

                <ul>
                    <h4>Arfyvex Core Team</h4>
                    <li><a href="https://redscientist.com/vrun" target="_blank">Redscientist Labs</a></li>
                    <li><a href="https://redscientist.com/artist/arfyvex" target="_blank">Audio</a></li>
                    <li><a href="https://sola.nekoweb.org/index.html" target="_blank">Sola</a></li> 
                </ul>

                <ul>
                    <h4>UNDEFINED</h4>
                </ul>
            </div>
        </div>

        <div class="sysbox credits kofi">
            <div class="supporters">
                <h4 definition="NOTE::'active fundfriend-level ko-fi supporters'">Active Support Groups (none of them made this mod but they deserve to still be here)</h4>
                <ul id="iconsupporters" class="tskip"></ul>
            </div>
        </div>

        <div class="sysbox support">
            <h3>Support Actions</h3>
            <div class="center">
                <div class="buttons">
                    <a href="https://ko-fi.com/corruworks" target="_blank" class="button kofi" definition="NOTE::'join the supporter ko-fi (its like patreon but less evil)'">
                        Support Corru
                    </a>

                    <a href="https://corru.observer" target="_blank" class="button audio" definition="NOTE::'play it'">
                        Play the original
                    </a>
                    
                    <span class="supportercredits button" definition="NOTE::'view all supporters and contributors'" onclick="window.open('/credits', 'Credits', 'width=600,height=600')">Additional Credits</span>
                </div>
            </div>
        </div>

        <div class="sysbox">
            <h3>Abridged License</h3>
            <span class="nonsense">this implant is provided on a permanent 'pre-mortis' b2.5 license, 'as-is', without any express or implied warranty. except as expressly set forth in the extended license, mindsci shall not have any liability for any direct, indirect, incidental, special, exemplary, or consequential damages (including without limitation loss of life), however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use or the exercise of the implant for non-insured, non-industrial purposes. with regards to external mindspike log manipulation: the entire risk as to the quality and performance of the recollection is with you. should any thoughtform prove defective in any respect, you (not the initial operator responsible for export) assume the cost of any necessary servicing, repair or correction. this disclaimer of warranty constitutes an essential part of this license. under no circumstances and under no legal theory, whether tort (including negligence), contract, or otherwise, shall you, the initial operator, any data editor, or any distributor of mindspike data, or any supplier of any of such parties, be liable to any person for any indirect, special, incidental, or consequential damages of any character including, without limitation, damages for loss of goodwill, work stoppage, implant failure or malfunction, or any and all other commercial damages or losses, even if such party shall have been informed of the possibility of such damages. this limitation of liability does apply to liability for death or personal injury resulting from such party's negligence. finally, for further information regarding usage, liability, limitations, and modification, please refer to the full license.</span>
        </div>
	</details>
</div>

<script>
    let topBar = null; 
    let moneyBar = null; 
    fetch("https://corrukofisupporters.corru.workers.dev/api/").then(resp=>resp.json()).then(data=>{
        if(!data.length || !data.some(sub => sub.highest_tier == "Fundfriend" && sub.active )) {
            document.querySelector('.sysbox.credits.kofi').remove()
            return
        }

        let supporterBox = document.querySelector('#iconsupporters')
        data.forEach(donator=>{
            if(donator.active && donator.highest_tier == "Fundfriend") {
                let lettas = getEquidistantLetters(donator.name.replaceAll(" ", ""))
                let lettaDisplay = ``
                lettas.forEach(letta=>{
                    lettaDisplay += `<span class="tskip">${letta[0]}</span>`
                })

                supporterBox.insertAdjacentHTML('beforeend', `
                    <li class="fundfriend tskip" definition="FUNDFRIEND::${donator.name}" style="animation-delay: -${Math.random() * 20}s;">
                        ${lettaDisplay}
                    </li>
                `)
            }
        })
    })

    //we make glyphs out of up to 3 letters from the name
    function getEquidistantLetters(input) {
        let result = []

        if (input.length <= 3) {
            for (let i = 0; i < input.length; i++) result.push(input.charAt(i))
        } else {
            let indices = [0, Math.floor(input.length * 0.5), input.length - 1]
            indices.forEach(index => {
                result.push(input.charAt(index))
            })
        }

        return result
    }
</script>
	
	<div id="content">
		<div class="grid-plane">
    <div class="grid-container">
        <div class="grid-animator">
        </div>
    </div>
</div>

<div id="stage-navigator">
    <span>SPATIAL NAVIGATION</span>
    <div class="stage-arrows">
        <div class="quality" key="quality" onclick="javascript:stepKey('q')">
            <i class="ci-quality"></i>    
        </div>
        <div class="up" key="w" onclick="javascript:stepKey('w')"><i class="ci-up"></i></div>
        <div class="left" key="a" onclick="javascript:stepKey('a')"><i class="ci-left"></i></div>
        <div class="down" key="s" onclick="javascript:stepKey('s')"><i class="ci-down"></i></div>
        <div class="right" key="d" onclick="javascript:stepKey('d')"><i class="ci-right"></i></div>
        <div class="swap" key="e" onclick="javascript:stepKey('e')">
            <i class="ci-zoomin"></i>
            <i class="ci-zoomout"></i>    
        </div>
        <div class="party" key="z" onclick="javascript:stepKey('z')"><i class="ci-group"></i></div>
    </div>
</div>
<div class="errorzone"></div>

<style>

@import url(https://corru.observer/css/combat.css?1739304139471944793);
@import url(https://corru.observer/css/fpfight.css?1739304139471944793);
@import url(https://corru.observer/css/bullethell.css?1739304139471944793);
@import url(https://corru.observer/css/local/embassy_global.css?1739304139471944793);

#content {
    background: black;
}

#content::after {
    display: none;
}

#content .grid-plane {
    transition: clip-path 400ms ease-in-out, opacity 1s ease-in-out;
}


#combat::after, #combat::before {
    transform: rotate(180deg)
}
#combat::before {
    background-image: url(https://corru.observer/img/textures/fear.gif);
}

#bh_player::after {
  content: "WASD / MOUSE";
  display: block;
  white-space: nowrap;
  color: var(--neutral-color);
  background: black;
  position: absolute;
  font-family: barcodetext;
  top: 0;
  left: 50%;
  transform: translate(-50%, -150%);
  padding: 0.25em;
  font-size: 1.75EM;
  transition: opacity 1s;
}

#bh_player.hidenotice::after {
    opacity: 0;
}

.errorzone {
    display: none;
    position: absolute;
    width: 150vmax;
    height: 150vmax;
    background-image: url(https://corru.observer/img/textures/warp.gif), url(https://corru.observer/img/textures/corrurippletran.gif), url(https://corru.observer/img/textures/tranclouds.gif);
    background-position: center;
    background-size: cover, auto, auto;
    background-color: black;
    animation: SPIN 6s linear infinite reverse;
    transition: opacity 200ms linear;
    opacity: 0;
    z-index: 101;
    pointer-events: none;
}

.painprep .errorzone { 
    display: block;
}

.slowpain .errorzone {
    transition: opacity 5s ease-in;
}

.painmode .errorzone {
    opacity: 1;
}

.painmode.painhalf .errorzone {
    opacity: 0.5;
    background-color: transparent;
}

.errorzone::after, .errorzone::before {
    content: "";
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background: inherit;
    animation: SPIN 10s ease-in-out infinite alternate;
    background-color: transparent;
}

.errorzone::before {
    animation-direction: reverse;
    animation-duration: 10s;
}

.testsign {
    color: black;
    text-shadow: 1px 1px var(--neutral-color);
}

.dyp.testsign > * {
    pointer-events: none;
}

</style>



		<script id="PageData">
			content = document.querySelector('#content')
			body = document.body

			if(typeof page == "object") {
				oldPage = page
			}

			// This script is generated per-page based on jekyll front-matter and other inputs. If you're looking at how stuff was done, be prepared for truly terrible whitespace management. It's prettier when I'm working on it, trust me.
			page = {
				title: "..__dungeontest__..",
				name: "progtest",
				dialoguePrefix:  "test" ,
				path: location.pathname,
				flags: {},
				howls: [],
				cacheval: 1739304139471944793,

				

				
				order: "1",
				

				
				bgm: new Howl({
					onload: function () {page.howls.push(this)},
					src: ['/audio/CarelessCrypt.mp3'],
					preload: true,
					loop: true,
					 volume: 2, 
					 rate: 1, 
					sprite: {
						__default: [50, 9999999, true]
					}
				}),

				mothComment: ()=>{
    var moth = "the output here is so strange..."

    if(env.currentDialogue.justChanged) moth = "anything else on your mind?"

    return moth
}
,
                
				
				mothChat: {
					startName: "about whatever this is",
					getDest: ()=>{return `mth++${page.dialoguePrefix}`},
				},
				

				
				
				onLoaded: ()=>{	
                    env.coins = 0;
					document.querySelectorAll('#grid-ref').forEach(e=>e.remove())
					body.setAttribute('page', page.name)
					content.setAttribute('page', page.name)
					document.querySelector('#static .enter').setAttribute('page', page.title)
					document.scrollingElement.scrollTop = 0
					

					updatePreferenceAttributes()

					//dynamically inserted
					
					addResources(["https://corru.observer/js/combat/fpfight.js", "https://corru.observer/js/combat/combatActionsJson.js", "https://corru.observer/js/combat/combatActorsJson.js", "https://corru.observer/js/combat/combat.js", "https://corru.observer/js/bullethell.js", "https://corru.observer/js/embassy.js", "https://corru.observer/js/embassy_golem.js", "/js/objectives.js", "https://sola.nekoweb.org/edcorru/js/edcommon.js" ])
					env.dialogues.mthgrmresp = generateDialogueObject(`
RESPOBJ::
    RESPONSES::self
        output?<+>output
        arfyvex?<+>arfyvex
        proxy?<+>proxy        
        nevermind<+>CHANGE::++moth
            FAKEEND::(back)
`)

env.dialogues[`mth++${page.dialoguePrefix}`] = generateDialogueObject(`
start
    self
        i have a question about this

    moth
        yeah i have a lot too
        throw them at me though
    
    RESPOBJ::mthgrmresp

loop
    RESPOBJ::mthgrmresp

output
    self
        IT'S LIKE A MEMORY STREAM?
    
    moth
        yeah
        it looks super primitive compared to what we have now though
        like when you first connected it looked like a whole memory snapshot
        lotta states, lotta connections
        almost like it was just going to make you view a stream
        but then it gave control to you?
        there's not a lotta data going anymore
        but whenever you move i see a lot of like
        logic flare, almost like thoughts put under a framing device
    
    RESPONSES::self
        strange<+>loop
            FAKEEND::(back)

proxy
    self
        CAN YOU GET ANY INFO ON MY PROXY?
    
    moth
        i have <em>no</em> clue what you are controlling right now
        maybe you could try scanning it?
    
    RESPONSES::self
        good idea<+>loop
            FAKEEND::(back)            

arfyvex
    self
        DID YOU SEE THE NAME ARFYVEX TOO?
        DURING THAT SYSTEM SCAN
    
    moth
        yup, and i tried looking it up too
        not seeing much though
        just something about it going under in the early 2000's
        some big pr scandal
        no clue what though
        a lotta stuff that old is hard to track info on anymore
        might have to try and ask around here for info
        by the way, that logo on the front of the server is theirs
        makes sense i guess
    
    RESPONSES::self
        yeah<+>loop
            FAKEEND::(back)

`)

env.dialogues["sign1"] = generateDialogueObject(`
start
    sourceless
        This Update firmware package is for the following StepBack Core libraries:
        - SBC Networking Stack for V
        - Online Layer co-operator backend
        Standard charge of this firmware package : Careless
        Default ambiant charge at rest: Off (System default)
        Manual package deployment chamber located at 1-0:0-2:24-0
    RESPONSES::sys
        close<+>END
`)

env.dialogues["sign2"] = generateDialogueObject(`
start
    sourceless
        Larry's shared library shop
        Always open, come visit.
    RESPONSES::sys
        close<+>END
`)    

env.dialogues["sign3"] = generateDialogueObject(`
start
    sourceless
        Harry's rescue from anywhere
        It just works.
    RESPONSES::sys
        close<+>END
`)             

env.dialogues["signundefined"] = generateDialogueObject(`
start
    sourceless
        UNDEFINED
    RESPONSES::sys
        close<+>END
`)                        
                    
                    
env.dialogues["enemytest"] = generateDialogueObject(`
start
    sourceless
        The fiends approach!
    RESPONSES::akizet
        engage<+>END
            EXEC::env.combat.dynamicCombat()
        disable<+>disable
            SHOWIF::'EXEC::checkItem(env.ITEM_LIST.disabler)'
            FAKEEND::(use disabler)
        debug kill<+>disable
            FAKEEND::(use disabler even if u dont have one)

disable
    sourceless
        A disabler is used!
            EXEC::removeItem(env.ITEM_LIST.disabler)
    RESPONSES::akizet
        continue<+>END
            EXEC::env.combat.dynamicCombat({dry: true});cutscene(true);setTimeout(()=>{cutscene(false);env.combat.dynamicCallback(env.rpg.enemyTeam)}, 1010)
            FAKEEND::(wait)
`)

env.dialogues["d3_genericenemyvictory"] = generateDialogueObject(`
start
    sourceless
        The fiends relent!
            EXEC::env.stage.current.onStep()
        TEXEC::env.combat.dynamicReward()

    RESPONSES::akizet
        continue<+>END
    
    RESPONSES::sys
        demo final boss post dialogue<+>CHANGE::bossclear
            FAKEEND::(dont click unless you killed boss)
`)


env.dialogues["explainer"] = generateDialogueObject(` 
start
    actual_site_error
        this dialogue will only show up once per session so pls read if u haven't
        this room tests how progresion and fighting against the new enemies feels for ep3
        these are all the fights that will be in EP3, basically in order
        there's a buncha stuff happening...
        especially since you can do the three wings in any order!
        first off, you need to clear the first few enemies in front
        in MANUFACTURING (ON DA LEFT) you unlock augments and some parts for the IK golem (unlockable character)
        in SFER (MIDDLE) has story bits but is required for the other parts for IK golem
        once you have both IK golem parts, it will be automatically added to your party (in this test room anyway)
        in OPS (right) you unlock bozko and cavik
        once all three wings are cleared, the boss (behind you) can be fought
        anyway u have a bunch of items, including the sorry cyst that will add a gun augment you can give to anyone
        finally, you can re-organize your party! press Z and drag people around
        only 3 people can be active at a time, and akizet has to be active, so you basically have two interchangable slots
        ok have fun!

    RESPONSES::actual_site_error
        kill all initial enemies<+>start
            EXEC::document.querySelectorAll('.initial-evil').forEach(el=>el.parentElement.innerHTML = "")
        kill all manufacturing enemies<+>start
            EXEC::document.querySelectorAll('.m-evil').forEach(el=>el.parentElement.innerHTML = "")
        kill all sfer enemies<+>start
            EXEC::document.querySelectorAll('.s-evil').forEach(el=>el.parentElement.innerHTML = "")
        kill all ops enemies<+>start
            EXEC::document.querySelectorAll('.o-evil').forEach(el=>el.parentElement.innerHTML = "")
        kill all but boss<+>start
            EXEC::document.querySelectorAll('.o-evil, .s-evil, .m-evil').forEach(el=>el.parentElement.innerHTML = "")
            FAKEEND::(behind you btw watch out)
    RESPONSES::sys
        quick kill menu<+>CHANGE::quickkill
        continue<+>END
`)


env.dialogues["quickkill"] = generateDialogueObject(` 
start
    actual_site_error
        if u wanna clear areas, do this before continuing
        otherwise put startDialogue("quickkill") in your console to open it again

    RESPONSES::actual_site_error
        kill all initial enemies<+>start
            EXEC::document.querySelectorAll('.initial-evil').forEach(el=>el.parentElement.innerHTML = "")
        kill all manufacturing enemies<+>start
            EXEC::document.querySelectorAll('.m-evil').forEach(el=>el.parentElement.innerHTML = "")
        kill all sfer enemies<+>start
            EXEC::document.querySelectorAll('.s-evil').forEach(el=>el.parentElement.innerHTML = "")
        kill all ops enemies<+>start
            EXEC::document.querySelectorAll('.o-evil').forEach(el=>el.parentElement.innerHTML = "")
        kill all but boss<+>start
            EXEC::document.querySelectorAll('.initial-evil, .o-evil, .s-evil, .m-evil').forEach(el=>el.parentElement.innerHTML = "")
            FAKEEND::(behind you btw watch out)

    RESPONSES::sys
        continue<+>END
`)

createEntity({
    name: 'Shop',
    type: "thoughtform",
    image: "https://corru.observerimg/local/embassy/terminal_online.gif",
    text: `shop`,
    hide: true,
    actions: [
        {
            name: "enter shop",
            exec: ()=>{
                toggleAugmentMenu()
            }
        }
    ]
})

createEntity({
    name: 'packet',
    type: "thoughtform",
    image: "https://corru.observerimg/local/embassy/terminal_online.gif",
    text: `packet`,
    hide: true,
    actions: [
        {
            name: "interact",
            exec: ()=>{
                coinSummon(39, 17, 15, 15)
            }
        }
    ]
})

createEntity({
    name: 'sign',
    type: "thoughtform",
    image: "https://sola.nekoweb.org/edcorru/images/tiles/sign.gif",
    text: `Sign`,
    hide: true,
    actions: [
        {
            name: "read",
            exec: ()=>{
                let sign = env.targetedEntityParent
                switch(sign.getAttribute('type')) {
                    case "sign1":
                        startDialogue('sign1')
                    break
                    case "sign2":
                        startDialogue('sign2')
                    break  
                    case "sign3":
                        startDialogue('sign3')
                    break                        

                    default: 
                        startDialogue('signundefined')
                    break
                    break    
                }
            }
        }
    ]
})        
                    
					

					
						document.querySelector('body').classList.remove('nomoth')
					

					if(firstLoad || env.waitOnLoad) {
						if(!env.loading) body.classList.remove("loading") //this is otherwise handled in the loadResources function
						body.setAttribute('state', 'corru-loaded')
					} else {
						page.onEnter()
						if(oldPage.bgm) oldPage.bgm.unload() //unloads the old page music to save memory
					}

					// global defs
					
					
					
			
					
					// definitions required for page
					
					
					console.log('rendering buddies!')
					Buddy.renderGlobalBuddies()
					document.dispatchEvent(env.hooks.corru_loaded)
				},

				onEnter: ()=>{
					if(!page.dialoguePrefix.includes("notfound")) {
						change(`visited_${location.pathname.replace(/\//g, '')}`, true)
					}
					
					//global VN object update
					page.vn = new VN()
					window.vnObj = page.vn

					
					readoutAdd({message: `..__NAVIGATING::"${page.name}"__..`, name:"sys", actor: "sys", type: "navigation", show: false, sfx: false})
					
					
					body.setAttribute('state', 'corru-entered')
					firstLoad = false

					
					if(corruStatic.playing() && !body.classList.contains("hard-cut")) {
						corruStatic.fade(corruStatic.volume(), 0, 1000)
						setTimeout(()=> corruStatic.stop(), 1001)
					}
					if(page.bgm) {
						page.bgm.volume(0)
						page.bgm.play()
						page.bgm.fade(0, 1, 1000)
						env.bgm = page.bgm
					} else {
						env.bgm = null
					}
					

					//dyn

					page.flags.augmentMax = 3
                    
        function addEDBar() {
            // Create the top bar element
            topBar = document.createElement('div');
            topBar.className = 'top-bar';
            topBar.textContent = 'Control 1-1:1-1:??-?'; // Change this to your desired text

            // Add inline styles for the top bar
            topBar.style.fontFamily = 'bastard';
            topBar.style.position = 'fixed';
            topBar.style.top = '0';
            topBar.style.right = '0';
            topBar.style.width = "100%";

            topBar.style.backgroundColor = 'black';
            topBar.style.color = 'white';
            topBar.style.display = 'flex';
            topBar.style.justifyContent = 'right';
            topBar.style.alignItems = 'right';
            topBar.style.fontSize = '24px';
            topBar.style.zIndex = '1';

            // Append the top bar to the body
            document.body.appendChild(topBar);

            moneyBar = document.createElement('div');
            moneyBar.className = 'money-bar';
            moneyBar.textContent = '♦0'; // Change this to your desired text

            // Add inline styles for the top bar
            moneyBar.style.fontFamily = 'bastard';
            moneyBar.style.position = 'fixed';
            moneyBar.style.top = '0';
            moneyBar.style.left = '15em';
            moneyBar.style.width = "100%";

            moneyBar.style.color = 'white';
            moneyBar.style.display = 'flex';
            moneyBar.style.justifyContent = 'left';
            moneyBar.style.alignItems = 'right';
            moneyBar.style.fontSize = '24px';
            moneyBar.style.zIndex = '1';
            
            document.body.appendChild(moneyBar);

        }

        // Call the function to add the top bar
       
                    

function testUnlock(evilClass, evilBlock, flag) {
    if(!document.querySelectorAll(evilClass).length && !check(flag)) {
        document.querySelectorAll(evilBlock).forEach(e=>{
            if(e.querySelector("#creature")) return
            e.classList.remove('prop', 'blocks', 'dyp')
            e.innerHTML = ""
        })
        change(flag, true)
        return true
    } else return false
}


                    
env.stages['careless1'] = {
    creature: env.stageEntities.embassyCreature,
    width: 48,
    enterDirection: "down",
    
    exec: () => {
        addEDBar(); 
    },

    onStep: ()=>{
        topBar.textContent = "Control 1-1:1-1:" + stageCoordinatesFromId('creature').x + "-" + stageCoordinatesFromId('creature').y;
        stageCoordinatesFromId('creature')
        
    },

    entities: {
        e: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead initial-evil",
                type: "g_prelobby1",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['husk'].graphic
            }
        },

        E: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead initial-evil",
                type: "g_prelobby2",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['surgeon_golem'].graphic
            }
        },

        É: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead initial-evil",
                type: "g_prelobby3",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['pressure_golem'].graphic
            }
        },

        v: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead m-evil",
                type: "g_m1",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['husk'].graphic
            }
        },

        V: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead m-evil",
                type: "g_m2",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['constructor_golem'].graphic
            }
        },

        ä: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead m-evil",
                type: "g_m3",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['husk'].graphic
            }
        },

        "┼": {
            contains: {
                id: "foe",
                class: "evil newevil staysdead m-evil",
                type: "g_mboss",
                dialogue: "enemytest"
            }
        },

        i: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead s-evil",
                type: "g_s1",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['husk'].graphic
            }
        },

        í: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead s-evil",
                type: "g_s2",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['pressure_golem'].graphic
            }
        },

        I: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead s-evil",
                type: "g_s3",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['pressure_golem'].graphic
            }
        },

        "≥": {
            contains: {
                id: "foe",
                class: "evil newevil staysdead s-evil",
                type: "g_sboss",
                dialogue: "enemytest"
            }
        },

        l: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead o-evil",
                type: "g_o1",
                dialogue: "enemytest",
                html: env.COMBAT_ACTORS['husk'].graphic
            }
        },

        L: {
            contains: {
                id: "foe",
                class: "evil newevil staysdead o-evil bozcavlock",
                type: "g_o2",
                dialogue: "enemytest",
            html: env.COMBAT_ACTORS['basic_golem'].graphic
            }
        },

        "¡": {
            contains: {
                id: "foe",
                class: "evil newevil staysdead o-evil",
                type: "g_oboss",
                dialogue: "enemytest"
            }
        },

        "τ": {
            contains: {
                id: "foe",
                class: "evil newevil staysdead final-evil",
                type: "g_boss",
                dialogue: "enemytest"
            }
        },

        "O": {
            class: "blocks initial-block testsign",
            dialogue: "enemytest",
            contains: {
                html: "clear initial enemies first",
                dyp: {
                    image: "url(https://corru.observer/img/da_fiend.png)"
                }
            } 
        },

        "•": {
            class: "blocks m-block testsign",
            contains: {
                html: "manufacturing<br>unlocks augments<br>unlocks one part of IK golem<br>step closer to open",
                dyp: {}
            }
        },

        "◘": {
            class: "blocks s-block testsign",
            contains: {
                html: "sfer<br>unlocks second part of IK golem<br>step closer to open",
                dyp: {}
            }
        },

        "○": {
            class: "blocks o-block testsign",
            contains: {
                html: "ops<br>unlocks bozko and cavik<br>step closer to open",
                dyp: {}
            }
        },

        "x": {
            class: "blocks boss-block testsign",
            contains: {
                html: "boss<br>clear all other areas first",
                dyp: {
                    transform: "rotateY(180deg)"
                },
            }
        },

        "♠": {
            exec: ()=> {
                document.querySelectorAll('.o-block').forEach(el=>{
                    el.innerHTML = ""
                    el.classList.remove('blocks', 'dyp')
                })
            }
        },

        "♣": {
            exec: ()=> {
                document.querySelectorAll('.s-block').forEach(el=>{
                    el.innerHTML = ""
                    el.classList.remove('blocks', 'dyp')
                })
            }
        },

        "♦": {
            exec: ()=> {
                document.querySelectorAll('.m-block').forEach(el=>{
                    el.innerHTML = ""
                    el.classList.remove('blocks', 'dyp')
                })
            }
        },

        "⎹": {
            class: "blocks darktile right",
        },

        "║": {
            class: "blocks darktile left",
        },          
        
        "‾": {
            class: "blocks darktile top",
        },       

        "═": {
            class: "blocks darktile bottom",
        },
        
        "╗": {
            class: "blocks darktile top right",
        },

        "╔": {
            class: "blocks darktile top left",
        },    

        "╝": {
            class: "blocks darktile bottom right",
        },   
        
        "╚": {
            class: "blocks darktile bottom left ",
        },        

        "T": {
            class: "notile spin",

            contains: {
                examineEntity: "packet",
                dyp: {
                    image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/packet.gif)',
                    width: 1.5,
                    height: 1.5,
                    transform: 'translateY(-20%)',
                    cross: true
                }
            }
                
        },

        "1": {
            contains: {
                dyp: {
                    image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/sign.gif)',
                    width: 1,
                    height: 1,
                },
                html: `
                    <figure class="path" type="sign1">
                        <div class="target" entity="sign"></div>
                    </figure>
                `
            }
                
        },     
        "2": {
            contains: {
                dyp: {
                    image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/sign.gif)',
                    width: 1,
                    height: 1,
                },
                html: `
                    <figure class="path" type="sign2">
                        <div class="target" entity="sign"></div>
                    </figure>
                `
            }
                
        },  
        "3": {
            contains: {
                dyp: {
                    image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/sign.gif)',
                    width: 1,
                    height: 1,
                },
                html: `
                    <figure class="path" type="sign3">
                        <div class="target" entity="sign"></div>
                    </figure>
                `
            }
                
        },     


        "│": {
            class: "railvert",
        },

        "─": {
            class: "railhorz",
        },

        "┌": {
            class: "raildr",
        },

        "┐": {
            class: "railrd",
        },  

        "P": {
            class: "path",
        },    
        
        "█": {
            class: "blocks darktile",
        },  
        
        "▒": {
            class: "path2",
        },  
        
        "░": {
            class: "path",
        },  
        

        "▄": {
            class: "notile",
          //  class: "blocks darktile cieling",
           // contains: {
           //     dyp: {
           //         image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/wall.gif)',
           //         width: 1,
           //         height: 1,
           //         transform: 'translateY(-69%) rotateX(42deg) translateZ(25em)',
           //     }
          //  }
        }, 

        "▀": {
            class: "notile",
            ////class: "blocks darktile cieling",
            ////contains: {
            ////    dyp: {
            //        image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/wall.gif)',
           ////         width: 1,
           //         height: 1,
           //         transform: 'translateY(-69%) rotateX(-42deg) translateZ(-25em)',
           //     }
           // }
        }, 

        "[": {
            class: "notile",
            //class: "blocks darktile cieling",
            //contains: {
            //    dyp: {
            //        image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/wall.gif)',
            //        width: 1,
            //        height: 1,
           //         transform: 'translateY(-69%) rotateY(-90deg)rotateX(42deg) translateZ(25em)',
            //    }
           // }
        }, 

        "]": {
            class: "notile",
            //class: "blocks darktile cieling",
            //contains: {
            //    dyp: {
            //        image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/wall.gif)',
            //        width: 1,
            //        height: 1,
            //        transform: 'translateY(-69%) rotateY(90deg) rotateX(42deg) translateZ(25em)',
            //     }
            // }
        }, 

        
        "B": {
            class: "blocks notile",
            contains: {
                class: "deadtainer megatainer",
                html: `<span></span><span></span><span></span><span></span><span></span>`
            }
        },        


        "L": {
            class: "prop blocks",
            contains: {
                examineEntity: "shop",
                dyp: {
                    image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/doordouble.gif)',
                    width: 2,
                    height: 2,
                    transform: 'rotateY(180deg) translateY(0%) translateZ(-6em)',
                }
            }
        },
        "l": {
            class: "prop blocks",
            contains: {
                examineEntity: "exit",
                dyp: {
                    image: 'url(https://sola.nekoweb.org/edcorru/images/tiles/doordouble.gif)',
                    width: 2,
                    height: 2,
                    transform: 'rotateY(0deg) translateY(0%) translateZ(-6em)',
                }
            }
        },        
    },

    plan: `
        ...........▄.⎹▒▒║[.............]⎹▒▒║.▄▄.........
        ...........══╝▒▒║[.............]⎹▒▒╚═══.........
        ..........░░░░░░║[.............]⎹░░░▒▒▒.........
        .........░░░░T░░║[.............]⎹░░░░░░░........
        ▄▄▄▄▄▄.⎹..░░░░░░║.▄▄▄▄▄▄▄▄▄▄▄▄▄.⎹░░░░░░░░║[.....
        ═══════╝▒T..░░▒░╚═L═══════════L═╝░▒░..░░T║[.....
        ▒▒▒▒▒▒▒▒▒▒....▒.░2▒░░░░░1░░░░░▒3░.▒....▒▒║[.....
        ‾‾‾‾‾‾‾╗▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒╔‾‾‾‾‾.......
        ▀▀▀▀▀..⎹░░░░░░░░░░░░░░░░▒░░░░░░░░░░╚══════......
        ......]⎹▒▒▒▒░░░T░░░░░┌─┐▒┌─┐░░░░░░░░░░░░░░......
        ..........▒▒░░░░░░░░╔‾╗│░│╔‾╗░░░▒▒▒░░░T.........
        ...........‾‾‾‾‾‾‾‾‾..⎹│░│║..‾‾‾‾‾‾‾‾...........
        ...........▀▀▀▀▀▀▀▀▀..⎹│p│║..▀▀▀▀▀▀▀▀...........
        .......................‾l‾......................
`

    
    // plan: `
    //    .░.░.░.
    //    Ü┼.≥.░.
   //     .ä.I.¡.
    //    .V.í.L.
    //    .v.i.l.
    //    .•.◘.○.
    //    .♦.♣.♠.
     //   .OOOOO.
   //     .░░░░░.
   //     .░░É░░.
   //     ...E...
   //     ...e...
   //     ...░...
  //      ...░...
   //     .░░p░░.
   //     .░░░░░.
   //     ...x...
   //     ...τ...
  //  `
}

                 

changeStage('careless1')
document.addEventListener('keydown', stageKeypress)

page.party = [
    {
        slug: "akizet",
        combatActor: "akizet",
        name: "Akizet",
        element: "Unlucky",
        class: "Surface Veteran",
        hp: 15,
    },

    {
        slug: "miltza",
        name: "Miltza",
        element: "Wishful",
        class: "Cynical Artist",
        hp: 10,
        combatActor: "miltza"
    },

    {
        slug: "gakvu",
        combatActor: "gakvu",
        element: "Talkative",
        name: "Gakvu",
        class: "Conspicuous Insider",
        hp: 10
    },

    {
        slug: "tozik",
        element: "Neutral",
        combatActor: "tozik",
        name: "Tozik",
        class: "Corrucystic Technician",
        hp: 10,
    }
];

page.party.inventory = [
    //[item reference, amount]
    [env.ITEM_LIST['restorative'], 3],
    [env.ITEM_LIST['aima_cyst'], 2],
    [env.ITEM_LIST['satik_cyst'], 2],
    [env.ITEM_LIST['kavruka'], 2],
    [env.ITEM_LIST['disabler'], 2],
    [env.ITEM_LIST['sorry_cyst'], 1],
];

page.partyMenuEnabled = true
page.party.reorganizable = true

env.loadedSave = true
env.embassy.initializeEmbassyCombatSettings()
env.ADVANCE_RATE = 1000

if(!check("TEMP!!testroom")) {
    change("TEMP!!testroom", true)
} else {
}

env.embassy.music_unsafe_golems = new Howl({
    src: ['https://corru.observer/audio/CarelessCrypt.mp3'],
    preload: true,
    loop: true,
    volume: 2,
    sprite: {
        __default: [0, 999999999, true]
    }
})

env.embassy.music_golems_combat = new Howl({
    src: ['https://corru.observer/audio/embassy_golems_combat.ogg'],
    preload: true,
    loop: true,
    volume: 1,
    sprite: {
        __default: [0, 159988, true]
    }
})
env.combat.defaults.bgm = env.embassy.music_golems_combat

env.embassy.music_golems_boss = new Howl({
    src: ['https://corru.observer/audio/embassy_golems_melee.ogg'],
    preload: true,
    loop: true,
    volume: 0.75,
    sprite: {
        __default: [0, 159000, true]
    }
})
env.embassy.music_golems_boss.intendedVol = 0.75
env.embassy.music_golems_boss.volume(0.75)

					Buddy.triggerPageBuddies()
					document.querySelector('#PageData').remove()
					document.dispatchEvent(env.hooks.corru_entered)
					mothHasUnreadCheck()

					setTimeout(()=>{
						if(oldPage) if(oldPage.howls) oldPage.howls.forEach(howl=>howl.unload())
					}, 400)
				},

				onLeaving: (dest = false)=>{
					body.setAttribute('state', 'corru-leaving')
					MUI("off")
					env.waitOnLoad = false

					if(env.bgm){
						let oldbgm = env.bgm
						env.bgm = null
						if(oldbgm.playing()) {
							oldbgm.fade(oldbgm.volume(), 0, 1000)
							setTimeout(()=> oldbgm.stop(), 1001)
						}
					}

					if(!body.classList.contains("hard-cut")) {
						corruStatic.volume(0)
						corruStatic.play()
						corruStatic.fade(0, env.corruStaticBaseVol, 1000)
					}

					//dyn
					
					stageCleanup()
combatCleanup()

            		change('TEMP!!sat', true)
					Buddy.cleanPageBuddies({removeEl: false})
					document.dispatchEvent(env.hooks.corru_leaving)

					if(dest) swup.loadPage({url: dest})
					delete page.vn
				}
			}

			 page.bgm.intendedVol = 0.75 

			env.pageName = "progtest";
			env.pagePath = location.pathname;
		</script>
	</div>

	<!-- i got my eye on you -->

	<script id="creditnotice">
		document.body.insertAdjacentHTML("afterbegin", `<div class="creditnotice">
			<span>hi! sola here!! this is a modification of the webgame corru.observer. if you have not played it go play that</span>
			<span>a lot of the assets and code and systems presented here come directly from corru, and this also will not make a lot of sense if you have not played corru yet</span>
    		<span>also, of course unlike all those shitty crypto sites i got direct permission for this. anyways, non-diagetic warning out</span>
        </div>

		<style>
			.creditnotice { display: none; }
			body[state="corru-loaded"] .creditnotice {
			position: absolute;
			z-index: 20000;
			background: blue;
			padding: 0.5em;
			max-width: 50vw;
			bottom: 0;
			right: 0;
			display: flex;
			flex-direction: column;
			gap: 1em;
			font-size: 14px;
			}
		</style>`)

	</script>
  </body>
</html>